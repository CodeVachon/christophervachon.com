function loadFileForFN(a,b){var c=$.Deferred();return $.isFunction(b)?(console.log("found: "+b),c.resolve()):(console.log("Fetch: "+a),$.getScript(a,function(){console.log("Fetch Complete: "+a),c.resolve()}).fail(function(b){console.log("Failed to Laod: "+a),console.log(b),c.fail()})),c.promise()}function dialog(a){var b=a.title?a.title:"Dialog",c=a.content?a.content:"No Content",d=$("<div>").addClass("modal-footer");if(a.buttons)for(var e in a.buttons)d.append($.isFunction(a.buttons[e])?$("<button>").attr({"data-dismiss":"modal",type:"button"}).html(e).addClass("btn btn-default").on("click",a.buttons[e]):$("<button>").attr({"data-dismiss":"modal",type:"button"}).html(e).addClass(a.buttons[e].class?a.buttons[e].class:"btn btn-default").on("click",a.buttons[e].onClick));else d.append($("<button>").attr({"data-dismiss":"modal",type:"button"}).text("Close").addClass("btn btn-default"));return $("<div>").addClass("modal fade").append($("<div>").addClass("modal-dialog").append($("<div>").addClass("modal-content").append($("<div>").addClass("modal-header").append($("<button>").addClass("close").attr({type:"button","data-dismiss":"modal","aria-hidden":!0}).html("&times;")).append($("<h4>").addClass("modal-title").html(b))).append($("<div>").addClass("modal-body").append(c)).append(d))).modal("show").on("hidden.bs.modal",function(){$(this).remove()})}var _FBInit=!1;$(document).ready(function(){$("form").each(function(){var a=$(this);a.find("[data-datepicker]").size()>0&&(console.log("Date Picker Found"),loadFileForFN("/includes/js/bootstrap-datepicker.js","datepicker").done(function(){a.find("[data-datepicker]").each(function(){console.log("Add Datepicker to: "+$(this).attr("name"));var a={format:"yyyy/mm/dd",todayBtn:!0};$(this).datepicker(a)})})),a.find("[data-timepicker]").size()>0&&(console.log("Time Picker Found"),loadFileForFN("/includes/js/bootstrap-timepicker.min.js","timepicker").done(function(){a.find("[data-timepicker]").each(function(){console.log("Add Timepicker to: "+$(this).attr("name"));var a={showMeridian:!1};$(this).timepicker(a)})})),a.find("[data-wysiwyg]").size()>0&&(console.log("wysiwyg Found"),loadFileForFN("/includes/js/tinymce/jquery.tinymce.min.js","tinymce").done(function(){a.find("[data-wysiwyg]").each(function(){console.log("Add wysiwyg to: "+$(this).attr("name"));var a={script_url:"/includes/js/tinymce/tinymce.min.js",width:"100%",height:200,menubar:!1};"basic"==$(this).attr("data-wysiwyg")?(a.plugins="link",a.statusbar=!1,a.toolbar="bold italic underline | link unlink"):(a.plugins="link, code",a.statusbar=!1,a.toolbar="code | undo redo | bold italic underline strikethrough | link unlink | blockquote | bullist numlist "),$(this).tinymce(a)})})),a.find("[data-fbquery]").size()>0&&(console.log("Facebook Query Lookup Found"),loadFileForFN("//connect.facebook.net/en_UK/all.js","FB").done(function(){a.find("[data-fbquery]").each(function(){console.log("Add fbquery to: "+$(this).attr("name"));var a=$(this);a.wrap($("<div>").addClass("input-group")).after($("<span>").addClass("input-group-btn").append($("<button>").addClass("btn btn-default").prop("type","button").append($("<span>").addClass("glyphicon glyphicon-list-alt")).on("click",function(b){b.preventDefault(),console.log("Facebook Query Request"),_FBInit||(FB.init({appId:"272812729524274",channelUrl:"//www.finealley.com/channel.html"}),_FBInit=!0),FB.getLoginStatus(function(b){b.authResponse?(_accessToken=b.authResponse.accessToken,FB.api(a.attr("data-fbquery")+"&access_token="+_accessToken,function(b){if(console.log(b),b[a.attr("data-fbkey")]){var c=$("<form>");for(var d in b[a.attr("data-fbkey")].data)c.append($("<div>").addClass("radio").append($("<label>").append($("<input>").prop({type:"radio",name:"eventId",value:b[a.attr("data-fbkey")].data[d].id})).append(b[a.attr("data-fbkey")].data[d].name)));dialog({title:"Select Facebook Event",content:c,buttons:{Select:{"class":"btn btn-primary",onClick:function(){a.val(c.find(":checked").val())}},Cancel:function(){console.log("Cancel")}}})}})):console.log("Not Authenticated")})})))})}))})});